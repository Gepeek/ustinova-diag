import streamlit as st

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(page_title="–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Ustinova School", page_icon="üß™", layout="centered")

# –ö–∞—Å—Ç–æ–º–Ω—ã–π CSS –¥–ª—è —Å—Ç–∏–ª—è Ustinova School
st.markdown("""
    <style>
    .stApp {
        background-color: #FFFFFF;
    }
    h1, h2, h3 {
        color: #D63384 !important; /* –¢–æ—Ç —Å–∞–º—ã–π —Ä–æ–∑–æ–≤—ã–π */
        font-family: 'Inter', sans-serif;
    }
    .stButton>button {
        background-color: #D63384;
        color: white;
        border-radius: 20px;
        border: none;
        padding: 10px 25px;
        font-weight: bold;
        transition: 0.3s;
        width: 100%;
    }
    .stButton>button:hover {
        background-color: #b0266a;
        color: white;
        border: none;
    }
    .stProgress > div > div > div > div {
        background-color: #D63384;
    }
    .result-card {
        padding: 20px;
        border: 2px solid #D63384;
        border-radius: 15px;
        background-color: #FFF0F6;
    }
    </style>
    """, unsafe_allow_html=True)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
if 'step' not in st.session_state:
    st.session_state.step = 'welcome'
if 'score' not in st.session_state:
    st.session_state.score = 0

def restart():
    st.session_state.step = 'welcome'
    st.session_state.score = 0

# --- –õ–û–ì–ò–ö–ê –®–ê–ì–û–í ---

# 0. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
if st.session_state.step == 'welcome':
  # st.image("https://ustinova-school.online/logo.png", width=200) # –ó–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –ª–æ–≥–æ –µ—Å–ª–∏ –µ—Å—Ç—å
    st.title("–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É—Ç–µ—á–∫–∏ –ø—Ä–∏–±—ã–ª–∏ –º–∞—Å—Ç–µ—Ä–∞", anchor=False)
    st.write("–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ò—Ä–∏–Ω—ã –£—Å—Ç–∏–Ω–æ–≤–æ–π. ü§ñ‚ú® –î–∞–≤–∞–π –∑–∞ 2 –º–∏–Ω—É—Ç—ã –≤—ã—è—Å–Ω–∏–º, –≥–¥–µ —Ç—ã —Ç–µ—Ä—è–µ—à—å –¥–µ–Ω—å–≥–∏ –∏ –ø–æ—á–µ–º—É —Ç–≤–æ–π –¥–æ—Ö–æ–¥ –Ω–µ —Ä–∞—Å—Ç–µ—Ç —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ, –∫–∞–∫ –º–æ–≥ –±—ã. –ì–æ—Ç–æ–≤–∞ —É–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–¥—É? üëá")
    if st.button("–ü–æ–µ—Ö–∞–ª–∏! üöÄ"):
        st.session_state.step = 1
        st.rerun()

# 1. –í–æ–ø—Ä–æ—Å –ø—Ä–æ –æ–ø—ã—Ç
elif st.session_state.step == 1:
    st.progress(20)
    st.subheader("1. –û–ø—ã—Ç –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ")
    st.write("**–ö–∞–∫ –¥–æ–ª–≥–æ —Ç—ã —É–∂–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏?**")
    options = {
        "–Ø —Ç–æ–ª—å–∫–æ –ø–ª–∞–Ω–∏—Ä—É—é –Ω–∞—á–∞—Ç—å (–Ω–æ–≤–∏—á–æ–∫) üê£": 1,
        "–†–∞–±–æ—Ç–∞—é –¥–æ 1 –≥–æ–¥–∞ (–Ω–∞–±–∏–≤–∞—é —Ä—É–∫—É) üî®": 2,
        "–û–ø—ã—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä (1‚Äì3 –≥–æ–¥–∞) üë©‚Äçüé®": 3,
        "–ü—Ä–æ—Ñ–∏ (3+ –≥–æ–¥–∞), –Ω–æ —á—É–≤—Å—Ç–≤—É—é –ø–æ—Ç–æ–ª–æ–∫ üîù": 4
    }
    for text, val in options.items():
        if st.button(text):
            st.session_state.score += val
            st.session_state.step = 2
            st.rerun()

# 2. –í–æ–ø—Ä–æ—Å –ø—Ä–æ —Å—Ç—Ä–∞—Ö–∏
elif st.session_state.step == 2:
    st.progress(40)
    st.subheader("2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å (–•–∏–º–∏—è –∏ —Å–æ—Å—Ç–∞–≤—ã)")
    st.write("**–ß–µ—Å—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –±—ã–≤–∞–µ—Ç –ª–∏ —É —Ç–µ–±—è —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ–π?**")
    options = {
        "–î–∞, –∫–æ–≥–¥–∞ –≤–∏–∂—É —É–±–∏—Ç—ã–π –±–ª–æ–Ω–¥ –∏–ª–∏ 5-—é —Å—Ç–µ–ø–µ–Ω—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è üò±": 1,
        "–ë–æ—é—Å—å –æ—à–∏–±–∏—Ç—å—Å—è —Å –≤—ã–±–æ—Ä–æ–º —Å–æ—Å—Ç–∞–≤–∞ –∏ ¬´–Ω–µ —É–≥–∞–¥–∞—Ç—å¬ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç üß™": 2,
        "–°—Ç—Ä–∞—Ö–∞ –Ω–µ—Ç, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–∞—Å—Ç–æ –¥–µ—Ä–∂–∏—Ç—Å—è –º–µ–Ω—å—à–µ, —á–µ–º —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã üìâ": 3,
        "–Ø —É–≤–µ—Ä–µ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º —à–∞–≥–µ, —Å—Ç—Ä–∞—Ö–∞ –Ω–µ—Ç ‚úÖ": 4
    }
    for text, val in options.items():
        if st.button(text):
            st.session_state.score += val
            st.session_state.step = 3
            st.rerun()

# 3. –í–æ–ø—Ä–æ—Å –ø—Ä–æ –≤—Ä–µ–º—è
elif st.session_state.step == 3:
    st.progress(60)
    st.subheader("3. –í—Ä–µ–º—è = –î–µ–Ω—å–≥–∏")
    st.write("**–°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º —É —Ç–µ–±—è –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ (–∫–µ—Ä–∞—Ç–∏–Ω/–±–æ—Ç–æ–∫—Å)?**")
    options = {
        "–ë–æ–ª–µ–µ 5 —á–∞—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞—é –Ω–∞ –∏–∑–Ω–æ—Å) üê¢": 1,
        "3.5 ‚Äì 4.5 —á–∞—Å–∞ (–∫–∞–∫ —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞) üïí": 2,
        "–ú–µ–Ω–µ–µ 3 —á–∞—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞—é –±—ã—Å—Ç—Ä–æ –∏ —á–µ—Ç–∫–æ) ‚ö°Ô∏è": 3
    }
    for text, val in options.items():
        if st.button(text):
            st.session_state.score += val
            st.session_state.step = 4
            st.rerun()

# 4. –í–æ–ø—Ä–æ—Å –ø—Ä–æ —á–µ–∫
elif st.session_state.step == 4:
    st.progress(80)
    st.subheader("4. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å (–°—Ä–µ–¥–Ω–∏–π —á–µ–∫)")
    st.write("**–¢–≤–æ–π —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ –∑–∞ –æ–¥–Ω—É –ø—Ä–æ—Ü–µ–¥—É—Ä—É?**")
    options = {
        "–î–æ 3 000 —Ä—É–±. (—Ä–∞–±–æ—Ç–∞—é –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –∞—Ä–µ–Ω–¥—É) üí∏": 1,
        "3 000 ‚Äì 6 000 —Ä—É–±. (—Å—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç) üí≥": 2,
        "–û—Ç 7 000 —Ä—É–±. –∏ –≤—ã—à–µ (–ø—Ä–µ–º–∏—É–º-—á–µ–∫) üî•": 3
    }
    for text, val in options.items():
        if st.button(text):
            st.session_state.score += val
            st.session_state.step = 5
            st.rerun()

# 5. –í–æ–ø—Ä–æ—Å –ø—Ä–æ –±–∞–∑—É
elif st.session_state.step == 5:
    st.progress(95)
    st.subheader("5. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∞–∑–∞")
    st.write("**–ö–∞–∫ –º–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫ —Ç–µ–±–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ?**")
    options = {
        "–ü—Ä–∏—Ö–æ–¥—è—Ç –æ–¥–∏–Ω —Ä–∞–∑ –∏ –ø—Ä–æ–ø–∞–¥–∞—é—Ç üë£": 1,
        "–í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —è –Ω–µ –ø–æ–¥–Ω–∏–º–∞—é —Ü–µ–Ω—É üõë": 2,
        "–°—Ç–∞–±–∏–ª—å–Ω–æ —Ö–æ–¥—è—Ç –≥–æ–¥–∞–º–∏ –∏ –ø—Ä–∏–≤–æ–¥—è—Ç –ø–æ–¥—Ä—É–≥ üëØ‚Äç‚ôÄÔ∏è": 3
    }
    for text, val in options.items():
        if st.button(text):
            st.session_state.score += val
            st.session_state.step = 'result'
            st.rerun()

# --- –§–ò–ù–ê–õ–¨–ù–´–ô –≠–ö–†–ê–ù ---
elif st.session_state.step == 'result':
    score = st.session_state.score
    st.balloons()
    
    if 5 <= score <= 9:
        title = "–•–∞–æ—Ç–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç üå™"
        text = """–¢—ã —Å–µ–π—á–∞—Å –≤ —Å–∞–º–æ–π –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–µ. –ù–∏–∑–∫–∏–π —á–µ–∫ + —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ —Å–ª–æ–∂–Ω—ã–º–∏ –≤–æ–ª–æ—Å–∞–º–∏ = —Ä–∞–±–æ—Ç–∞ —Ä–∞–¥–∏ —Ä–∞–±–æ—Ç—ã. –¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è '–¥—ã—Ä–∞', –≤ –∫–æ—Ç–æ—Ä—É—é —É–ª–µ—Ç–∞—é—Ç –¥–µ–Ω—å–≥–∏ ‚Äî —ç—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–≤–µ—Ä–¥–æ–π –±–∞–∑—ã. –¢—ã –±–æ–∏—à—å—Å—è –±–ª–æ–Ω–¥–∏–Ω–æ–∫, –±–æ–∏—à—å—Å—è –ø–æ–¥–Ω—è—Ç—å —Ü–µ–Ω—É –∏ —Ç—Ä–∞—Ç–∏—à—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.\n\n**–¢–≤–æ—è –ø–æ—Ç–µ—Ä—è –ø—Ä–∏–±—ã–ª–∏: –º–∏–Ω–∏–º—É–º 40 000 ‚Äì 60 000 —Ä—É–±. –≤ –º–µ—Å—è—Ü. üí∏**\n\n–¢–µ–±–µ –Ω–µ–ª—å–∑—è –∏–¥—Ç–∏ –≤ '–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ', –ø–æ–∫–∞ –Ω–µ –ø–æ—Å—Ç–∞–≤–∏—à—å —Ç–µ—Ö–Ω–∏–∫—É. –¢–µ–±–µ –Ω—É–∂–Ω–∞ '–ú–∞–≥–∏—è –ú–∞—Å—Ç–µ—Ä–∞'."""
    elif 10 <= score <= 14:
        title = "–ó–∞–ª–æ–∂–Ω–∏–∫ –∫—Ä–µ—Å–ª–∞ ‚õì"
        text = """–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –æ–ø—ã—Ç –∏ –∫–ª–∏–µ–Ω—Ç—ã, –Ω–æ —Ç—ã —É–ø–µ—Ä–ª–∞—Å—å –≤ –ø–æ—Ç–æ–ª–æ–∫. –¢–≤–æ—è '–¥—ã—Ä–∞' ‚Äî —ç—Ç–æ –≤—Ä–µ–º—è –∏ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ö–∏–º–∏–∏. –¢—ã —Ç—Ä–∞—Ç–∏—à—å 4 —á–∞—Å–∞ —Ç–∞–º, –≥–¥–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ 2.5 –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞. –¢—ã –±–æ–∏—à—å—Å—è VIP-–∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø–æ–Ω–∏–º–∞–µ—à—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ—Å—Ç–∞–≤—ã.\n\n**–¢–≤–æ—è –ø–æ—Ç–µ—Ä—è –ø—Ä–∏–±—ã–ª–∏: –æ—Ç 80 000 –¥–æ 120 000 —Ä—É–±. –≤ –º–µ—Å—è—Ü. üìâ**\n\n–¢–µ–±–µ –Ω—É–∂–Ω–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–æ—Ä–æ–≥–∏–º–∏ –±–ª–æ–Ω–¥–∏—Ä–æ–≤–∫–∞–º–∏."""
    else:
        title = "–°–∫—Ä—ã—Ç—ã–π –º–∏–ª–ª–∏–æ–Ω–µ—Ä üíé"
        text = """–¢—ã –ø—Ä–æ—Ñ–∏, —Ç–µ—Ö–Ω–∏–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ. –ù–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –≤—ã–≥–æ—Ä–∞–µ—à—å. –¢–≤–æ—è '–¥—ã—Ä–∞' ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–º–∏—É–º-—Å–µ–≥–º–µ–Ω—Ç–æ–º. –¢–µ–±–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —à—Ç—Ä–∏—Ö–æ–≤ –≤ —Ö–∏–º–∏–∏ –∏ —Å–µ—Ä–≤–∏—Å–µ, —á—Ç–æ–±—ã –ø–æ—Å—Ç–∞–≤–∏—Ç—å —á–µ–∫ 15 000+ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–Ω—å—à–µ.\n\n**–¢–≤–æ—è –ø–æ—Ç–µ—Ä—è –ø—Ä–∏–±—ã–ª–∏: –±–æ–ª–µ–µ 150 000 —Ä—É–±. –≤ –º–µ—Å—è—Ü. üí∞**\n\n–î–ª—è —Ç–µ–±—è 28 –ø–æ—Ç–æ–∫ ‚Äî —ç—Ç–æ —à–ª–∏—Ñ–æ–≤–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–π —Å—Ç—É–¥–∏–∏."""

    st.markdown(f"""
        <div class="result-card">
            <h3>–¢–≤–æ–π –¥–∏–∞–≥–Ω–æ–∑: {title}</h3>
            <p>{text}</p>
        </div>
    """, unsafe_allow_html=True)
    
    st.write("---")
    st.write("–¶–∏—Ñ—Ä—ã –Ω–µ –≤—Ä—É—Ç. 2026 –≥–æ–¥ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Ç–∞–∫–∏–º –∂–µ... –∏–ª–∏ —Å—Ç–∞—Ç—å –≥–æ–¥–æ–º —Ç–≤–æ–µ–≥–æ —Ç—Ä–∏—É–º—Ñ–∞.")
    
    st.markdown("[![–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É](https://img.shields.io/badge/–û—Å—Ç–∞–≤–∏—Ç—å_–∑–∞—è–≤–∫—É-–ù–ê_28_–ü–û–¢–û–ö-D63384?style=for-the-badge)](https://ustinova-school.online/28-potok)")
    
    if st.button("–ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ üîÑ"):
        restart()
        st.rerun()
